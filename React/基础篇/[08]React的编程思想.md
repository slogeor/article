### step1: 将 UI 拆解到组件层次结构中

如何拆分组件呢，其实只需要像拆分一个新方法或新对象一样的方式即可。一个常用的技巧是单一职责原则，即一个组件理想情况只处理一件事。如果一个组件持续膨胀，就应该将其拆分为多个更小的组件。

### step2: 用 React 构建一个静态版本

最简单的方法是构建一个采用数据模型并渲染 UI 但没有交互性的版本。构建静态版本需要大量代码和少量思考，而添加交互需要大量思考和少量代码。

构建静态版本使用 props 传递数据，state 只用于交互。 对于简单的例子，可以自上而下的构建，而在较大的项目中，自下而上更利于编写测试。

### step3: 确定 UI state 的最小表示

要正确的构建应用程序，首先需要考虑应用程序需要的可变的最小集合。这里的关键是：不要重复你自己（DRY），找出应用程序所需要 state 的绝对最小表示，并且可以以此计算出你所需的所有其他数据内容。

**props 和 state 的原则**

* 1. 是否通过 props 从父级传入，如果是这样，它不能是 state
* 2. 是否永远不会发生变化，如果是这样，它不能是 state
* 3. 是否可以由组件中其他 state 或 props 计算得出，如果是这样，它不能是 state

### step4: 确定 state 的位置

React 单向数据流在层级中自上而下进行，这样有可能不能立即判断状态属于哪个组件，可以按照下面的步骤分析。

* 确定每个基于这个 state 的组件
* 找出公共父级组件
* 公共父级组件或者另一个更高级组件拥有这个 state
* 如果找不出一个拥有该 state 的合适组件，可以创建一个简单的新组建保留这个 state，并将其添加到公共父级组件的上层即可

### step5: 添加反向数据流

应用具备了正确渲染沿着层次结构向下传播，但有时也需要另一种数据流向，自下向上的传播。

### 总结

这种思想有可能会比你通常的写法多几行代码，但切记阅读代码的重要性远远高于写代码，模块化、结构清晰的代码最利于阅读。当创建一个大组件库的时候，你将感激模块化、结构清晰和可以重用的代码。
